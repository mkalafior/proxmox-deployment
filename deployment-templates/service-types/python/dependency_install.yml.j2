# Python Dependency Installation Tasks
- name: Create Python virtual environment
  shell: python3 -m venv venv
  args:
    chdir: "{{ app_dir }}"
    creates: "{{ app_dir }}/venv"
  become_user: "{{ app_user }}"

- name: Install Python dependencies (if requirements.txt exists)
  shell: |
    source venv/bin/activate
    if [ -f requirements.txt ]; then
      pip install -r requirements.txt
    fi
  args:
    chdir: "{{ app_dir }}"
  become_user: "{{ app_user }}"
